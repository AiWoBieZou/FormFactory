@using FormFactory
@model PropertyVm
           
@{ var posted = (Model.Value as string ?? "false").Split(',');
   var wasChecked = bool.Parse(posted.Last());
}
<input type='hidden' value='@wasChecked.ToString().ToLower()'  id="hidden-@Model.Name" name='@Model.Name'>
<input class="@(Model.IsWritable ? "" : "disabled")" type="checkbox" id="@Model.Name" value="true" @(wasChecked ? "checked=\"\"" : "\"\"") onchange="javascript: document.getElementById('hidden-@Model.Name').value = this.checked;" @(Model.IsWritable ? "" : "disabled=\"disabled\"")/>
