@using FormFactory
@model PropertyVm
@{ 
    bool wasChecked = false;
    if (Model.Value is bool)
    {
        wasChecked = (bool) Model.Value;
    }else{
        wasChecked = false;
    }
}
<input type='hidden' value='@wasChecked.ToString().ToLower()' id="@Model.Name" name='@Model.Name'>
<input class="@(Model.IsWritable ? "" : "disabled")" type="checkbox" value="true" @(wasChecked ? "checked=checked" : "") onchange="javascript: $('#@Model.Name').val(this.checked)" @(Model.IsWritable ? "" : "disabled=\"disabled\"")/>
